## Лекция 20. Модули и пакеты


### 1. Модули
*Модулем* будем называть любой файл с расширением `.py`.
* Создадим модуль `sample.py`  с содержимым:
```
def add(a:int, b:int) -> int:
    """
    a + b 
    """
    return a + b

numerics = [1,2,3,4,5,6]

MAX_VALUE = 10 ** 5
```

* Создадим другой модуль `main.py`:
```
import sample

res = sample.add(10, 20)
print("res of add 10 and 20:", res)
print(sample.numerics)
print(sample.MAX_VALUE)
```
* Модуль `main` и модуль `sample` ничего друг про друга не знают, даже если они лежат в одной директории

* Фраза `import sample` означает следующее:
    * 1) Запускаете весь модуль `sample` от начала до конца
    * 2) Затем все содержимое модуля становится доступным при помощи имени `sample` в другом пакете
    * 3) После чего, обращаясь `sample.obj_name` в другом модуле, можно получить доступ к внутренностям этого объекта в модуле `sample`
    * x) При импортировании модуля выполняется его полная загрузка в память и после этого И ТОЛЬКО ПОСЛЕ ЭТОГО, модуль становится доступным на обращение к своим объектам

* Например попробуем воспользоваться функцией `add` модуля `sample`:
```
<module_name>.<module_object> -> sample.add
```

* В случае, если название модуля неудобное (длинное, непонятное, неудачное), при импортировании можно заменить исходное название на т.н. местоименное (алиас)
```
import sample as s
import sample_with_timezones_at_rfb_database_greenplum_connector as conn

res = s.add(10, 20)
print("res of add 10 and 20:", res)
print(s.numerics)
print(s.MAX_VALUE)

print("Connector:", conn.CONN)
```

В примере выше имена исходных модулей после импортирования заменяются на `s` и `conn`.

* **Гадость** - циклический `import` - в новых версиях получите ошибку ```....... circular import``` означает, что у вас есть как минимум 2 модуля, которые импортируют друг друга.


### 2. Разделяющее и совмещающее пространства имен при импортировании.
* В `python` существует 2 вида пространств имен при имопртировании:
    1) `разделяющее` пр.-во имен - для обращения к элементам другого модуля необходимо явно указывать имен этого модуля (или местоимение, пример `sample.add`, `conn.CONN`)
    2) `совмещающее` пр.во- имен - для обращения к элемента другого модуля не требуется писать название модуля, но при имортировании необходимо указать, какие имена будут загружены в рабочую область!

### 3. Pycahce (пукаш) - лучший друг!
После любой операции импортирования чего угодно куда угодно, рядом с местом где находится импортируемый модуль появлется `pycache`
* В `pycache` будет хранится некая предсобранная (байт-код) версия вашего модуля.


### 4. Пакеты
* Пакет - это набор модулей!
* Создадим пакет geometry (создадим директорию `geometry`)
* ОБЯЗАТЕЛЬНО В ПАКЕТЕ ДОЛЖЕН НАХОДИТЬСЯ МОДУЛЬ `__init__.py`
* Определеим в пакете 2 модуля: `geometry.circle` и `geomtry.rectangle`
* `circle.py`
```
import math as m

def perimeter(radius: float) -> float:
    """
    Выполняем подсчет длины окружности
    радиуса radius по формуле:
    2 * pi *radius
    """
    return 2 * m.pi * radius

def area(radius : float) -> float:
    """
    Выполняем подсчет площади окружности
    радиуса radius по формуле
    pi * radius ^2
    """
    return m.pi * (radius ** 2)
```

* `rectangle.py`
```
def perimeter(a_side: float, b_side : float) -> float:
    """
    Периметр прямоугольника 2 * (a_side + b_side)
    """
    return 2 * (a_side + b_side)

def area(a_side :float, b_side :float) -> float:
    """
    Площадь прямоугольника a_side * b_side
    """
    return a_side * b_side
```

* Теперь создадим модуль `main_b.py` за пределами пакета `geometry` и попробуем обратиться к его содержимому!
```
```